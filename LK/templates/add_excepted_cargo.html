{% extends 'base_for_add_and_edit_cargo.html' %}

{% load static %}

{% load formset_tags %}

{% block CSS0 %}

<style>
div.col-xs-10.cool{
    margin-top:30px !important
}


textarea#id_comment{
    min-width: 400px;
    height: 60px;
}
</style>
{% endblock CSS0 %}

{% block title %}Добавление ожидаемого груза{% endblock title %}

{% block content%}
<!--------------------------Messages---------------------------------------->
{% if form.errors %}
<div class="alert alert-danger" role="alert"><span class="glyphicon glyphicon-warning-sign" aria-hidden="true">{{ form.errors }} ЗАПОЛНЯТЬ ЛАТИНСКИМИ</span></div>
        <ul class="messages">
        {% for message in messages %}
        <span class="glyphicon glyphicon-warning-sign" aria-hidden="true" {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</span>
        {% endfor %}
    </ul>
{% endif %}
<!------------------------End Messages---------------------------------------->
<h1>Добавление ожидаемого груза:</h1><label>Заполнять латиницей</label>
<!--{#<form method="post" action="">{% csrf_token %}
   <!-- <div class="small-5 large-5" style="margin-left:10px;">{{ form.as_p }}</div> -->
<!--    <p>{{ form.pack_id }} id</p>
    <p>{{ form.weight }} Итого вес груза</p>
    <p>{{ form.external_id }} *Служба доставки</p>
    <p>{{ form.ttn }} *Трек номер посылки</p>
   {#  <p>{{ form.url }} Ссылка</p> #}
    <p>{{ form.comment }} Комментарий</p>

    <p>{{ form.currency_value }} *Стоимость груза</p>
    <p>{{ form.total }} *Total</p>
    <p>{{ form.volume }} *Обьем</p>
    <p>{{ form.point }} *К-во мест</p>
    <p>{{ form.category_group }} *Категория</p>
    <p>{{ form.pack_number }} *#уп</p>
    <p style="visibility: hidden;">{{ form.customer }} Код клиента</p>

  <!--       {% if uploaded_file_url %}
    <p>File uploaded at: <a href="{{ uploaded_file_url }}">{{ uploaded_file_url }}</a></p>
  {% endif %} -->
<!--        <div class="col-sm-9" style="float:right; margin-bottom:20px"><input class="btn btn-success" type="submit" value="Добавить" /><br/></div> -->

<!--






<h3>Добавление компании</h3>

   <form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
      {{ form.as_p }}
       <fieldset>
      {{ pack_form.management_form }}
      {{ pack_form.non_form_errors }}
      {% for form0 in pack_form.forms %}
          <div class="inline {{ pack_form.prefix }}">
              {{form0}}          </div>
                {% if form0.DELETE %}
                    {{ form0.DELETE }}
                <button type="button" data-formset-delete-button>Delete form</button>
              {% endif %}

      {% endfor %}
      </fieldset>
    <input type="button" value="Add another" data-formset-add>

<script>jQuery(function($) {
            $("#formset").formset({
				'animateForms': true,
				'reorderMode': 'animate'
			}).on('formAdded', function() {
                console.log("Form added", this, arguments);
            }).on('formDeleted', function() {
                console.log("Form deleted", this, arguments);
            });
        });</script>

<hr>
<hr>
<hr>
       <button class="btn btn-primary" type="submit" name="submit">Добавить</button>
    </form>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static 'js/jquery.formset.js' %}"></script>

<script src="{% static 'js/jquery.min.js' %}"></script>






<hr>
<hr>
<hr>


{{ formset.media }}

<div id="formset" data-formset-prefix="{{ formset.prefix }}">
    {{ formset.management_form }}

    <div data-formset-body>
        <!-- New forms will be inserted in here -->
 <!--       {% for form0 in formset %}
            <div data-formset-form>
                {{ form }}
                {% if form.DELETE %}
                    {{ form.DELETE }}
                     <button type="button" data-formset-delete-button>Delete form</button>
                {% endif %}
            </div>
        {% endfor %}
    </div>

    <!-- The empty form template. By wrapping this in a <script> tag, the
    __prefix__ placeholder can easily be replaced in both attributes and
    any scripts -->
 <!--   <script type="form-template" data-formset-empty-form>
        {% escapescript %}
            <div data-formset-form>
                {{ formset.empty_form }}
                <div class="hidden">{{ form.DELETE }}</div>
                <button type="button" data-formset-delete-button>Delete form0</button>
            </div>
        {% endescapescript %}
    </script>

    <!-- This button will add a new form when clicked -->
<!--    <input type="button" value="Add another" data-formset-add>
<!--
   <script>jQuery(function($) {
            $("#formset").formset({
				'animateForms': true,
				'reorderMode': 'animate'
			}).on('formAdded', function() {
                console.log("Form added", this, arguments);
            }).on('formDeleted', function() {
                console.log("Form deleted", this, arguments);
            });
        });</script>
-->
<!--</div>
<hr>
<hr>
<hr>

-->
<div class="col-md-12">
    <form action="" method="post">{% csrf_token %}
       <div class="col-md-6">
        <p>{{ form.external_id }} *Служба доставки</p>
        <p>{{ form.ttn }} *Трек посылки</p>
        <p>{{ form.category_group }}</p>
        <p>{{ form.weight }} Итого вес груза</p>
        <p>{{ form.point }} К-во мест</p>
        <p>{{ form.comment }}<br> Комментарий к грузу</p>
       </div>
       <div class="col-md-6">
        <p style="visibility: hidden;">{{ form.pack_number }} Номер уп</p>
        <p style="visibility: hidden;">{{ form.customer }} Код клиента</p>
        <p style="visibility: hidden;">{{ form.language }} Language</p>
        <p style="visibility: hidden;">{{ form.pack_status }} Pack_status</p>
        <p style="visibility: hidden;">{{ form.sklad }} sklad</p>
        <p style="visibility: hidden;">{{ form.volume }} volume</p>
        <p style="visibility: hidden;">{{ form.currency }} currency</p>
        <p style="visibility: hidden;">{{ form.currency_value }} currency_value</p>
        <p style="visibility: hidden;">{{ form.total }} total</p>
        <p style="visibility: hidden;">{{ form.currency_code }} currency_code</p>
       </div>
        <h3>Товары в посылке</h3>
        <table class="table">
            {{ pack_form.management_form }}

            {% for form0 in pack_form.forms %}
                {% if forloop.first %}
                    <thead>
                    <tr>
                        {% for field in form0.visible_fields %}
                            <th>{{ field.label|capfirst }}</th>
                        {% endfor %}
                    </tr>
                    </thead>
                {% endif %}
                <tr class="{% cycle 'row1' 'row2' %} formset_row">
                    {% for field in form0.visible_fields %}
                        <td>
                            {# Include the hidden fields in the form #}
                            {% if forloop.first %}
                                {% for hidden in form0.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                            {{ field }}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
        <input type="submit" value="Добавить"/> <a href="{% url 'LK:excepted_cargo' %}">к списку Ожидаемых</a>
    </form>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static 'js/jquery.formset.js' %}"></script>
<script type="text/javascript">
    $('.formset_row').formset({
        addText: 'добавить товар',
        deleteText: 'Удалить',
        prefix: 'familymember_set'
    });
</script>


{% endblock content %}