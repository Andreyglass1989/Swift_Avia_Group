{% extends 'base-admin.html' %}
{% load static %}


{% block active_payment %}active{% endblock active_payment %}

{% block CSS %}
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/Angul/ManagerAdminPayment/styles.css' %}">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.6/dist/css/bootstrap-select.min.css">
{% endblock CSS %}

{% block content %}

 <div class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              
              <!-- <a href="{% url 'ManagerAdmin:create_client'%}"><button class="btn btn-primary" >Добавить клиента</button></a> -->
              {% if USD1 %}<div>Курс: <span style="font-weight: bold">USD: {{ USD1 }}</span>, USD НБУ: {{ USD_nbu }}, 
                 <span style="font-weight: bold">ЮАНЬ: {{ CNY }}</span>
              USD2: {{ USD }}
               </div>
                  {% endif %} 

              <div class="card">
                <div class="card-header card-header-primary">
                  <!-- <h4 class="card-title ">Оплаты клиентов на карту Яковчук</h4> -->
                  
                  <h4 class="card-title"> Таблица транзакций на карту </h4>
                  
                    
                    <form method = "get" action = "{% url 'ManagerAdmin:payment_example'%}">  
                      <ul class="navbar-nav ml-5">
                        <div class="row">
                      <li class="nav-item col-md-4">

                        <div class="form-group">
                            <label class="label-control">Выберите период оплат</label>
                            <input style="color:white" type="text" name="daterange" class="form-control datetimepicker" value="{{ request.GET.daterange }}"/>
                        </div>



<!--                         <select name="period" id="inputDate" class="form-control select" style="background: transparent">
                          <option disabled selected>Выберите период оплат</option>
                          <option {% if request.GET.period == "today" %} selected {% endif %} value="today">Сегодня</option>
                          <option {% if request.GET.period == "lastday" %} selected {% endif %} value="lastday">Вчерашний день</option>
                        </select> -->

                      </li>
                      <li class="nav-item col-md-4">
                      <select name="entrepreneurs" id="inputState" class="form-control select" style="background: transparent">
                          <option disabled>Выберите карту</option>
                          <option {% if request.GET.entrepreneurs == "26009054357407" %} selected {% endif %} value="26009054357407">Варбанець Є.Р. ФОП</option>
                          <option {% if request.GET.entrepreneurs == "26003054348616" %} selected {% endif %} value="26003054348616">СПД ЩАВИНСКАЯ НАТАЛИЯ РОМАНОВНА</option>
                          <option {% if request.GET.entrepreneurs == "26007054340085" %} selected {% endif %} value="26007054340085">СПД ВАРБАНЕЦЬ ЛЮДМИЛА ПЕТРІВНА</option>
                          <option {% if request.GET.entrepreneurs == "26009054358622" %} selected {% endif %} value="26009054358622">СПД САВЄЛЬЄВА ЛЮДМИЛА ПЕТРІВНА</option>
                          <option {% if request.GET.entrepreneurs == "26007054353395" %} selected {% endif %} value="26007054353395">ЧОС М.В. ФОП</option>
                          <option {% if request.GET.entrepreneurs == "26004054347876" %} selected {% endif %} value="26004054347876">ФОП Яковчук А.А.</option>
                      </select>
                      </li>
 
                      <li class="nav-item col-md-4">
                        <input  type = "submit" value="Показать">
                      </li>     
                       </div>          
                    </ul>  
                  </form>
                 
<!--                     <div class="form-group">
                      <label class="label-control">Datetime Picker</label>
                      <input type="text" class="form-control datetimepicker" value="10-05-2016">
                    </div> -->

                 </div>

                <div class="card-body">
                  <div class="table-responsive">
                    <table id="example" class="table">
                      <thead class=" text-primary">
                        <th>
                          Дата/время валютирования
                        </th>
                        <th>
                          Сумма, UAH
                        </th>
                        <th>
                          город отправителя
                        </th>
                        <th>
                          Основание платежа
                        </th>
                        <th>
                          Наим контрагента
                        </th>
                      </thead>
                      <tbody>

                        {% for l in list %}

                        <tr>
                          <td>
                            {{ l.BPL_DAT_OD }}, {{ l.BPL_TIM_P }}
                          </td>
                          <td>
                            {{ l.BPL_SUM }} {{ l.BPL_CCY }}
                          </td>
                          <td>
                            {{ l.BPL_A_MFO_CITY }}
                          </td>
                          <td>
                            {{ l.BPL_OSND }}
                          </td>
                          <td class="text-primary">
                            {{ l.AUT_CNTR_NAM }}
                          </td>

                        </tr>

                        {% endfor %}

                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
<!-- {{ request }}   -->
<!-- {{ request.GET.entrepreneurs }} -->
<!-- {{ request.GET.period }} -->
    



<!-- <div class="container-fluid">
  <my-app>Загружаю ;=)</my-app>
</div> -->









<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.6/dist/js/bootstrap-select.min.js"></script>

<!-- (Optional) Latest compiled and minified JavaScript translation files -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.6/dist/js/i18n/defaults-*.min.js"></script> -->

<!-- <script src="{% static 'js/Angular/ManagerAdminPayment/main.js' %}"></script>
<script src="{% static 'js/Angular/ManagerAdminPayment/polyfills.js' %}"></script>
<script src="{% static 'js/Angular/ManagerAdminPayment/runtime.js' %}"></script> -->


<!-- Daterange picker -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

<script>
$(function() {
  $('input[name="daterange"]').daterangepicker({
    opens: 'left',
    locale: 'ru'
  }, function(start, end, label) {
    console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
  });
});
</script>

 <!--  Plugin for the Datepicker, full documentation here: https://github.com/Eonasdan/bootstrap-datetimepicker -->
<!-- <script src="{% static '/assets/js/plugins/bootstrap-datetimepicker.js' %}" type="text/javascript"></script> -->

<script type="text/javascript">
  $(document).ready(function() {
    $('#example').DataTable();
    $('#example1').DataTable();
    $('.select').selectpicker();
    $('input[name="daterange"]').daterangepicker({
      opens: 'left'
    }, function(start, end, label) {
      console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
      $('input[name="daterange"]').val(start.format('YYYY-MM-DD'))
    });


//     $('#inputState').on('change',function(e){
//          e.preventDefault();
//         var parca_turu = $(this).val();
//         console.log("Choose: "+parca_turu); 
//         $.ajax({
//             url:"",
//             method:'GET',
//           // send selected data to the parca_kayit method which is in views.py
//             data : {'entrepreneurs' : $(this).val()}, // 'parcaAdi' will be used in request.GET.get('parcaAdi') which is in views.py, $(this).val() is selected item, 
//             success:function(data){
//                 console.log(data);
//                 var obj = jQuery.parseJSON( data );
//                 console.log(obj)
//             }
//         });
// });
} );
</script>


{% endblock content %}